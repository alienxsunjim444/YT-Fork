# jarvis_fun_bot.py
import requests
from flask import Flask, request
from datetime import datetime
import random

app = Flask(__name__)

ACCESS_TOKEN = "‡¶§‡ßã‡¶Æ‡¶æ‡¶∞_‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï_‡¶™‡ßá‡¶ú_‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏_‡¶ü‡ßã‡¶ï‡ßá‡¶®"
VERIFY_TOKEN = "‡¶Ø‡ßá_‡¶ü‡ßã‡¶ï‡ßá‡¶®_‡¶§‡ßÅ‡¶Æ‡¶ø_‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï_‡¶¶‡¶ø‡ßü‡ßá_‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶¨‡ßá"

def send_message(recipient_id, message_text):
    url = f"https://graph.facebook.com/v15.0/me/messages?access_token={ACCESS_TOKEN}"
    payload = {
        "recipient": {"id": recipient_id},
        "message": {"text": message_text}
    }
    requests.post(url, json=payload)

def jarvis_response(message_text):
    message_text = message_text.lower()
    
    # ‡¶Æ‡¶ú‡¶æ ‡¶Æ‡¶ø‡¶∂‡¶ø‡ßü‡ßá ‡¶∞‡ßá‡¶∏‡¶™‡¶®‡ßç‡¶∏
    if "‡¶π‡ßç‡¶Ø‡¶æ‡¶≤‡ßã" in message_text or "hello" in message_text:
        return random.choice([
            "‡¶ì‡¶π‡ßã! ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ, ‡¶¨‡¶∏ üòé ‡¶Ü‡¶Æ‡¶ø Jarvis‡•§",
            "‡¶π‡ßç‡¶Ø‡¶æ‡¶≤‡ßã! Jarvis ‡¶è‡¶ñ‡¶æ‡¶®‡ßá‡•§ ‡¶ï‡ßá‡¶Æ‡¶® ‡¶≤‡¶æ‡¶ó‡¶õ‡ßá ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¶‡¶ø‡¶®?"
        ])
    elif "‡¶ï‡ßá‡¶Æ‡¶® ‡¶Ü‡¶õ‡ßã" in message_text:
        return random.choice([
            "‡¶∏‡¶¨ ‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá, ‡¶¨‡¶∏! ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ï‡ßá‡¶Æ‡¶® ‡¶Ü‡¶õ‡ßã?",
            "‡¶Ü‡¶Æ‡¶ø ‡¶§‡ßã ‡¶ï‡ßá‡¶¨‡¶≤ ‡¶ï‡ßã‡¶° ‡¶Ü‡¶∞ ‡¶¨‡¶æ‡¶á‡¶®‡¶æ‡¶∞‡¶ø ‡¶¶‡¶ø‡ßü‡ßá ‡¶¨‡¶æ‡¶Å‡¶ö‡¶ø, ‡¶§‡¶¨‡ßÅ‡¶ì ‡¶Æ‡¶ú‡¶æ ‡¶ï‡¶∞‡¶õ‡ßá!"
        ])
    elif "‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ï‡¶ø" in message_text:
        return "‡¶Ü‡¶Æ‡¶ø Jarvis, ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶∏‡¶π‡¶ï‡¶æ‡¶∞‡ßÄ‡•§ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶ï‡ßá '‡¶¨‡¶∏‡ßá‡¶∞ ‡¶¨‡¶ü'‡¶ì ‡¶¨‡¶≤‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßã‡•§"
    elif "‡¶∏‡¶Æ‡ßü ‡¶ï‡¶§" in message_text or "time" in message_text:
        now = datetime.now().strftime("%I:%M %p")
        return f"‡¶¨‡¶∏, ‡¶∏‡¶Æ‡ßü ‡¶è‡¶ñ‡¶® {now}‡•§ ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ï‡¶ø ‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶õ‡¶ø ‡¶®‡¶æ?"
    elif "‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶" in message_text or "thank you" in message_text:
        return random.choice([
            "‡¶∏‡¶¨ ‡¶∏‡¶Æ‡ßü‡¶á ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§, ‡¶¨‡¶∏‡•§",
            "‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶! ‡¶§‡¶¨‡ßá ‡¶∏‡¶§‡ßç‡¶Ø‡¶ø‡¶ï‡¶æ‡¶∞‡ßá‡¶∞ Jarvis ‡¶π‡¶≤‡ßá ‡¶è‡¶ñ‡¶®‡¶á ‡¶ï‡¶´‡¶ø ‡¶¨‡¶æ‡¶®‡¶æ‡¶§‡ßã üòè"
        ])
    elif "‡¶ï‡¶ø ‡¶ï‡¶∞‡¶õ‡ßã" in message_text:
        return random.choice([
            "‡¶ï‡ßã‡¶°‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßÅ‡¶¶‡ßç‡¶∞‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ù‡ßá ‡¶π‡¶æ‡¶∞‡¶æ‡¶á, ‡¶Ü‡¶∞ ‡¶§‡ßÅ‡¶Æ‡¶ø?",
            "‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ú‡¶æ‡¶®‡¶≤‡ßá ‡¶π‡ßá‡¶∏‡ßá ‡¶´‡ßá‡¶≤‡¶¨‡ßá‚Ä¶ ‡¶Ü‡¶Æ‡¶ø ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡ßú‡¶õ‡¶ø üòé"
        ])
    else:
        return random.choice([
            "‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá, ‡¶¨‡¶∏‡•§ ‡¶Ü‡¶Æ‡¶ø ‡¶∏‡ßá‡¶ü‡¶æ ‡¶Æ‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶õ‡¶ø‡•§",
            "‡¶π‡ßÅ‡¶Æ, ‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø‡•§ ‡¶Ü‡¶∞‡¶ì ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶¨‡¶≤‡¶¨‡ßá ‡¶ï‡¶ø?",
            "‡¶Æ‡¶ú‡¶æ ‡¶≤‡¶æ‡¶ó‡¶õ‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡ßú‡¶§‡ßá‡•§"
        ])

@app.route("/webhook", methods=["GET", "POST"])
def webhook():
    if request.method == "GET":
        token_sent = request.args.get("hub.verify_token")
        return request.args.get("hub.challenge") if token_sent == VERIFY_TOKEN else "Invalid verification token"
    
    if request.method == "POST":
        data = request.get_json()
        for entry in data.get("entry", []):
            for messaging_event in entry.get("messaging", []):
                sender_id = messaging_event["sender"]["id"]
                if "message" in messaging_event:
                    if "text" in messaging_event["message"]:
                        message_text = messaging_event["message"]["text"]
                    else:
                        message_text = ""
                    response_text = jarvis_response(message_text)
                    send_message(sender_id, response_text)
        return "ok", 200

if __name__ == "__main__":
    app.run(port=5000)
